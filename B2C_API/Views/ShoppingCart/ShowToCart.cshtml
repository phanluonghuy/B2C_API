@model B2C_API.Controllers.Cart

@{
    ViewBag.Title = "ShowToCart";
    //Layout = "~/Views/_LayoutHome.cshtml";
}

<h2>ShowToCart</h2>
@if (Model.Items != null)
{
    <table class="table">
        <thead>
            <tr>
                <th>Product Name</th>
                <th>Image</th>
                <th>Price</th>
                <th>Quanity</th>
                <th>Sum</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Items)
            {
                double total = ((double)item._shopping_products.UnitPrice) * item._shopping_quanity;
                <tr>
                    <td>
                        @Html.DisplayFor(model => item._shopping_products.ProductName)
                    </td>
                    <td>
                        <img src="data:image;base64,@System.Convert.ToBase64String(item._shopping_products.ProImage)" width="80" height="80" />
                    </td>
                    <td>
                        @Html.DisplayFor(model => item._shopping_products.UnitPrice)
                    </td>
                    <td>
                        @Html.DisplayFor(model => item._shopping_quanity)
                    </td>
                    <td>
                        @using (Html.BeginForm("Update_Quantity_Product", "ShoppingCart"))
                        {
                            <input type="hidden" value="@item._shopping_products.ProductID" name="Product_ID" />
                            <input type="number" value="@item._shopping_quanity" name="Product_Quantity" />
                            <input type="submit" value="Update Quantity">
                        }
                    </td>
                    <td>
                        Total : @total
                    </td>
                    <td>
                        <a href="/ShoppingCart/RemoveProduct/@item._shopping_products.ProductID">Remove</a>
                    </td>
                </tr>

            }
        </tbody>
        <tfoot>
            <tr>
                <td>
                    <strong colspan="5">Total: @Model.total_money()</strong>
                 
                </td>

            </tr>
            @using (Html.BeginForm("CheckOut", "ShoppingCart"))
            {
                <input type="hidden" value="@Model.total_money()" name="Total_money" />
                <tr>
                    <td>
                        Name <input type="text" name="Name" required /> <br />
                        Email <input type="email" name="Email" required /><br />
                        Phone Number <input type="number" name="Phone" required /> <br />
                        Address <input type="text" name="Address" required /> <br />
                        Select payment: 
                        <select name="Payment" class="form-control">
                            <option value="Cash">Cash</option>
                            <option value="VNPay">VNPay</option>
                        </select>
                        <input type="submit" value="CheckOut" class="btn btn-success" />
                    </td>
                </tr>
            }
        </tfoot>
    </table>
    <a href="@Url.Action("Index","Home")">Countinue to shopping</a>
}
